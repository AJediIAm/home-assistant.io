---
title: "Home Assistant OS Common Tasks"
description: "Guides for common tasks when using Home Assistant OS"
---


## Configuring access to files

One of the first things to take care of after installing Home Assistant OS is to provide yourself access to files. There are several add-ons commonly used for this, and most users employ a mix of a handful of add-ons. This section will describe some common choices.

---

### Installing and using the Samba add-on

Your Home Assistant OS install has default directories which are mapped to the add-ons so that they can be accessed by the services a particular add-on might provide. The Samba add-on exposes all of these as smb shares which can then easily be accessed from another computer. You can also edit files using the editor of your preference from your client computer.

The following directories are made available:

- addons
- backup
- config
- media
- share
- ssl

On the host system these exist on the `/data` partition at `/mnt/data/supervisor/`.
Configuring the add-on is straight-forward. You only need to set a user and password of your choice on the configuration page, save, and then start the add-on. The add-on will not start without setting a password! The other options can be left as-is for the majority of users.

`interface:` - By default, this will use the currently configured network interface and does not need to be changed.

`allow_hosts:` - This list of allowed networks covers the majority of home networks and does not usually need to be changed.

`veto_files:` - These are files (mostly generated by OS X) which will not be passed into share directories

- ._*
- .DS_Store
- Thumbs.db
- icon?
- .Trashes

One issue many Windows 10 users run in to is that older versions of SMB are disabled by default due to security issues. This prevents users from browsing the network from file explorer in a way which might be expected. While this *could* be resolved by enabling SMBv1 on Windows, it is not advisable. Instead, you can enter the ip address or hostname of your Home Assistant instance in File Explorer's address bar with two backslashes, as shown in the example screenshot.

![explorer address bar](TBD image of file explorer address bar.jpg)

You should then be prompted for the credentials you entered in the Samba add-on configuration. You also have the option of having the credentials stored so that you do not need to enter them again. After that, you'll have access to the directories which you can then mount as a drive or pin to Quick Access.

![directories](TBD image of directories.jpg)

For OS X, connecting to the shares is a matter of using the Finder menu > Go > Connect to Server...
You would then enter the ip address of your Home Assistant OS instance as `smb://your.ha.ip.address`

---

### Installing and using the SSH add-on (requires enabling advanced mode for the HA user)

Your Home Assistant OS install has default directories which are mapped to the add-ons so that they can be accessed by the services a particular add-on might provide. The Terminal & SSH add-on provides access to these directories over an ssh connection, and also access to nano and vi editors.  The add-on also provides access to the Home Assistant Command Line Interface (CLI) which provides custom commands for checking logs, stopping and starting Home Assistant and add-ons, creating/restoring snapshots, and more. (See [Home Assistant via Command Line](https://www.home-assistant.io/hassio/commandline/) for further info). The Terminal & SSH add-on does *not* provide access to the underlying host file system.

To use the add-on, enter a password or public key on the configuration page, then save and start the add-on.

By default the Terminal & SSH addon provides a web terminal which can be added as an item to your side-panel. In order to access from an ssh client, a port needs to be entered in the network section of the add-on's configuration page.

---

### Installing and using VSC add-on

Your Home Assistant OS install has default directories which are mapped to the add-ons so that they can be accessed by the services a particular add-on might provide. The Visual Studio Code add-on provides access to these directories through a web-based version of VSC. The add-on also provides access to the Home Assistant Command Line Interface (CLI) using VSC's terminal, which allows for checking logs, stopping and starting Home Assistant and add-ons, creating/restoring snapshots, and more. (See [Home Assistant via Command Line](https://www.home-assistant.io/hassio/commandline/) for further info). The Visual Studio Code add-on does *not* provide access to the underlying host file system.

---

### Installing and using File Editor add-on

---

## Home Assistant OS Snapshots

Snapshots are easily made in Home Assistant OS and are also available as services which can be used in automations. They can be created from the UI or the CLI (see below) and are stored in the /backup directory.

A full snapshot includes the following directories:

* config
* share
* add-ons (these are manually installed or created add-ons, and not those installed from the store)
* ssl
* media

They also include a compressed file for each installed add-on containing the add-on's version, config settings, and other data if any.

### Making a Snapshot from the UI

1. Go to Supervisor > Snapshots in the UI
2. Provide a name for the snapshot.
3. Choose full or partial.
4. Choose to password protect or not.

> Warning - Password protected snapshots cannot easily be browsed outside of Home Assistant OS

5. The only progress indicator at the moment is via the logs at the Supervisor > System page in the UI (or `ha su logs` in the CLI).
6. To update the snapshots page in order to see current snapshots, use the reload icon in the upper right of the page.

### Restoring a Snapshot on a new install

Restoring a snapshot on a fresh install of Home Assistant OS requires that you first upload the snapshot to the backup directory on the new instance. There is no way to upload snapshots from the snapshot dashboard at this time so the first thing to do is install and configure an add-on of your preference in order to provide access to the `backup` directory. Samba, File Editor, or VSC are all good choices for this.

After uploading to the `backup` directory, visit the snapshot page in the UI and reload the page using the icon in the upper right of the page to make the uploaded files visible. From there you can select your snapshot and then choose any or all parts of that snapshot to restore.

> Note: Before restoring third-party add-ons, add their repositories to the add-on store page first! These are any add-ons which are not in the official repo or the community add-on repo. Nothing bad will happen, but those add-ons won't get restored. You can always add the repos and then go back and do a partial restore of the missing add-ons.

### How long do snapshots take?

The length of time it takes to create or restore snapshots will depend on how much you have to compress or decompress. A large database file or a collection of camera media captured by MotionEye will take longer to decompress (the default database is the sqllite home-assistant_v2.db in the config directory).

See the [`recorder`](https://www.home-assistant.io/components/recorder/) integration page for ways to keep your database data down to a size that won't cause issues. Note the keep days, purge interval, and include/exclude options.

When the restore is complete, you will lose connection to the UI and it will return just as though you had restarted Home Assistant. It can be a good idea to do an additional full reboot as well especially if add-ons appear to be missing from the restore. You can reboot from the Supervisor > System > Host card in the UI.

### Creating snapshots using the cli

1. `ha sn list` - lists snapshots and their slugnames
2. `ha sn restore slugname` - restores a specific snapshot
3. `ha sn new --name nameofsnapshot` - create a snapshot

Use `ha help` to see more info.

### More automation and usage examples can be found [here](https://community.home-assistant.io/t/hassio-0-61-snapshot-service/39690/3?u=cogneato)

### Remove your snapshots to another location!

The snapshots won't be very convenient if they are on the device which you cannot access. Copy them off in batches manually from /backup on occasion. Or even better, create an automation to handle that using the examples above, or make use of an add-on like Google Drive backup or Dropbox Sync which can handle much of that for you!

[Hass.io Google Drive Backup](https://github.com/sabeechen/hassio-google-drive-backup)

[Dropbox Sync](https://github.com/danielwelch/hassio-dropbox-sync)

[Samba backup](https://github.com/thomasmauerer/hassio-addons/tree/master/samba-backup)

[Remote Backup (uses scp)](https://github.com/overkill32/hassio-remote-backup)

---

## Working with Audio
